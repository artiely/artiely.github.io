import{i as a,o as p,c as t,j as n,k as e}from"./app.8f9f5019.js";var o="/assets/2022-06-29-11-11-42.a4c4e34c.png",c="/assets/2022-06-29-11-12-53.5b51f9ab.png",l="/assets/2022-06-29-12-17-25.8f7d1e28.png",u="/assets/2022-06-29-12-17-50.e0f03db6.png";const r=e('<h1 id="unity-%E5%AE%9E%E7%8E%B0%E9%80%8F%E6%98%8E%E8%83%8C%E6%99%AF%E6%A1%8C%E9%9D%A2" tabindex="-1"><span class="prefix"></span><span class="content">Unity \u5B9E\u73B0\u900F\u660E\u80CC\u666F\u684C\u9762</span><span class="suffix"></span></h1><p>\u4EE5\u4E0B\u4EE3\u7801\u5B9E\u6D4B\u4E8E unity2020.3 / Windows 10 \u7CFB\u7EDF</p><p>\u6B65\u9AA4\uFF1A</p><figure><img src="'+o+'" alt=""></figure><figure><img src="'+c+`" alt=""></figure><p>\u5C06\u4EE5\u4E0B\u811A\u672C\u547D\u540D\u4E3A<code class="">TransparentWindow</code>\u6DFB\u52A0\u5230Camera</p><p>\u6548\u679C</p><p>\u4E0D\u5E26\u64CD\u4F5C\u680F\uFF0C\u9F20\u6807\u70B9\u51FB\u4E0D\u53EF\u7A7F\u900F</p><h2 id="%E7%AC%AC%E4%B8%80" tabindex="-1"><span class="prefix"></span><span class="content">\u7B2C\u4E00</span><span class="suffix"></span></h2><div class="language-csharp ext-csharp code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-csharp line-numbers-mode"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransparentWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">MARGINS</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cxLeftWidth<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cxRightWidth<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cyTopHeight<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cyBottomHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">region</span> \u5B9A\u4E49\u5916\u90E8\u51FD\u6570</span>

    <span class="token comment">// \u83B7\u53D6\u663E\u793A\u5728\u6700\u4E0A\u9762\u7684\u7A97\u53E3</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name">IntPtr</span> <span class="token function">GetForegroundWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name">IntPtr</span> <span class="token function">SetForegroundWindow</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u6CE8\u610F\u8981\u7F16\u5199\u4E0E 32 \u4F4D\u548C 64 \u4F4D\u7248\u672C\u7684 Windows \u517C\u5BB9\u7684\u4EE3\u7801 \u8BF7\u4F7F\u7528SetWindowLongPtr</span>
    <span class="token punctuation">[</span><span class="token function">DllImport</span><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetWindowLong</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nIndex<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">uint</span></span> dwNewLong<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Dwmapi.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">uint</span></span> <span class="token function">DwmExtendFrameIntoClientArea</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name">MARGINS</span> margins<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">SetWindowPos</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> hWndInsertAfter<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> X<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> Y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cx<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cy<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">uint</span></span> uFlags<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ReleaseCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">SendMessage</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> wMsg<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> wParam<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> lParam<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

    <span class="token comment">// \u7A97\u53E3\u53E5\u67C4</span>
    <span class="token class-name">IntPtr</span> Handle<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> !UNITY_EDITOR</span>

        <span class="token comment">// \u83B7\u53D6\u7A97\u53E3\u53E5\u67C4</span>
        Handle <span class="token operator">=</span> <span class="token function">GetForegroundWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u8BBE\u7F6E\u7A97\u53E3\u7684\u5C5E\u6027</span>
        <span class="token function">SetWindowLong</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">0x80000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">var</span></span> margins <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MARGINS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cxLeftWidth <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5C06\u7A97\u53E3\u6846\u67B6\u6269\u5C55\u5230\u5DE5\u4F5C\u533A</span>
        <span class="token function">DwmExtendFrameIntoClientArea</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> <span class="token keyword">ref</span> margins<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u8BBE\u7F6E\u7A97\u53E3\u4F4D\u7F6E</span>
        <span class="token function">SetWindowPos</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>


    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> !UNITY_EDITOR</span>
        <span class="token comment">// \u4FDD\u6301\u7A97\u53E3\u59CB\u7EC8\u5728\u6700\u524D\u9762</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Handle <span class="token operator">!=</span> <span class="token function">GetForegroundWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">SetForegroundWindow</span><span class="token punctuation">(</span>Handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u5DE6\u952E\u62D6\u52A8</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>Input<span class="token punctuation">.</span><span class="token function">GetMouseButtonDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">ReleaseCapture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">SendMessage</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> <span class="token number">0xA1</span><span class="token punctuation">,</span> <span class="token number">0x02</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">SendMessage</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> <span class="token number">0x0202</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h2 id="%E7%AC%AC%E4%BA%8C" tabindex="-1"><span class="prefix"></span><span class="content">\u7B2C\u4E8C</span><span class="suffix"></span></h2><p>\u4EE5\u4E0B\u8FD9\u6BB5\u4EE3\u7801\u7684\u6548\u679C\u662F\u534A\u900F\u660E\u7684\u611F\u89C9\uFF0C\u800C\u4E14\u6E38\u620F\u5BF9\u8C61\u4E5F\u534A\u900F\u660E\u4E86\u3002\u9F20\u6807\u53EF\u70B9\u51FB</p><div class="language-csharp ext-csharp code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-csharp line-numbers-mode"><code class="language-csharp"><span class="token comment">//Note: Inspired by and uses some code found here: http://forum.unity3d.com/threads/windows-api-calls.127719/</span>

<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span> <span class="token comment">// Pro and Free!!!</span>

<span class="token comment">//WARNING!! Running this code inside Unity when not in a build will make the entire development environment transparent</span>
<span class="token comment">//Restarting Unity would however resolve</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransparentWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;SetWindowLongA&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetWindowLong</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nIndex<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> dwNewLong<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ShowWindowAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> hWnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nCmdShow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;SetLayeredWindowAttributes&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetLayeredWindowAttributes</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> crKey<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">byte</span></span> bAlpha<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> dwFlags<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;GetActiveWindow&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">GetActiveWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;GetWindowLong&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">long</span></span> <span class="token function">GetWindowLong</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;SetWindowPos&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetWindowPos</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> hwndInsertAfter<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cx<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cy<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> uFlags<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">int</span></span> handle <span class="token operator">=</span> <span class="token function">GetActiveWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">int</span></span> fWidth <span class="token operator">=</span> Screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">int</span></span> fHeight <span class="token operator">=</span> Screen<span class="token punctuation">.</span>height<span class="token punctuation">;</span>

        <span class="token comment">//Remove title bar</span>
        <span class="token class-name"><span class="token keyword">long</span></span> lCurStyle <span class="token operator">=</span> <span class="token function">GetWindowLong</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// GWL_STYLE=-16</span>
        <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">12582912</span><span class="token punctuation">;</span>   <span class="token comment">//WS_CAPTION = 0x00C00000L</span>
        <span class="token class-name"><span class="token keyword">int</span></span> b <span class="token operator">=</span> <span class="token number">1048576</span><span class="token punctuation">;</span>    <span class="token comment">//WS_HSCROLL = 0x00100000L</span>
        <span class="token class-name"><span class="token keyword">int</span></span> c <span class="token operator">=</span> <span class="token number">2097152</span><span class="token punctuation">;</span>    <span class="token comment">//WS_VSCROLL = 0x00200000L</span>
        <span class="token class-name"><span class="token keyword">int</span></span> d <span class="token operator">=</span> <span class="token number">524288</span><span class="token punctuation">;</span>     <span class="token comment">//WS_SYSMENU = 0x00080000L</span>
        <span class="token class-name"><span class="token keyword">int</span></span> e <span class="token operator">=</span> <span class="token number">16777216</span><span class="token punctuation">;</span>   <span class="token comment">//WS_MAXIMIZE = 0x01000000L</span>

        lCurStyle <span class="token operator">&amp;=</span> <span class="token operator">~</span><span class="token punctuation">(</span>a <span class="token operator">|</span> b <span class="token operator">|</span> c <span class="token operator">|</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        lCurStyle <span class="token operator">&amp;=</span> e<span class="token punctuation">;</span>
        <span class="token function">SetWindowLong</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> lCurStyle<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// GWL_STYLE=-16</span>

        <span class="token comment">// Transparent windows with click through</span>
        <span class="token function">SetWindowLong</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">524288</span> <span class="token operator">|</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//GWL_EXSTYLE=-20; WS_EX_LAYERED=524288=&amp;h80000, WS_EX_TRANSPARENT=32=0x00000020L</span>
        <span class="token function">SetLayeredWindowAttributes</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Transparency=51=20%, LWA_ALPHA=2</span>

        <span class="token function">SetWindowPos</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> fWidth<span class="token punctuation">,</span> fHeight<span class="token punctuation">,</span> <span class="token number">32</span> <span class="token operator">|</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//SWP_FRAMECHANGED = 0x0020 (32); //SWP_SHOWWINDOW = 0x0040 (64)</span>
        <span class="token function">ShowWindowAsync</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Forces window to show in case of unresponsive app    // SW_SHOWMAXIMIZED(3)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="%E7%AC%AC%E4%B8%89" tabindex="-1"><span class="prefix"></span><span class="content">\u7B2C\u4E09</span><span class="suffix"></span></h2><p>\u53EF\u900F\u660E \u53EF\u9F20\u6807\u7A7F\u900F</p><div class="language-csharp ext-csharp code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-csharp line-numbers-mode"><code class="language-csharp">
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransparentWindow</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token class-name">Material</span> m_Material<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">struct</span> <span class="token class-name">MARGINS</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cxLeftWidth<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cxRightWidth<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cyTopHeight<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> cyBottomHeight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name">IntPtr</span> <span class="token function">GetActiveWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetWindowLong</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nIndex<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">uint</span></span> dwNewLong<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;Dwmapi.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">uint</span></span> <span class="token function">DwmExtendFrameIntoClientArea</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name">MARGINS</span> margins<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;SetWindowPos&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetWindowPos</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hwnd<span class="token punctuation">,</span> <span class="token class-name">IntPtr</span> hwndInsertAfter<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cx<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> cy<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> uFlags<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ShowWindowAsync</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nCmdShow<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;user32.dll&quot;</span><span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;SetLayeredWindowAttributes&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">SetLayeredWindowAttributes</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hwnd<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> crKey<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">byte</span></span> bAlpha<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> dwFlags<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;User32.dll&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">SetForegroundWindow</span><span class="token punctuation">(</span><span class="token class-name">IntPtr</span> hWnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> GWL_STYLE <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> GWL_EXSTYLE <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">uint</span></span> WS_POPUP <span class="token operator">=</span> <span class="token number">0x80000000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">uint</span></span> WS_VISIBLE <span class="token operator">=</span> <span class="token number">0x10000000</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">uint</span></span> WS_EX_TOPMOST <span class="token operator">=</span> <span class="token number">0x00000008</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">uint</span></span> WS_EX_LAYERED <span class="token operator">=</span> <span class="token number">0x00080000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">uint</span></span> WS_EX_TRANSPARENT <span class="token operator">=</span> <span class="token number">0x00000020</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> SWP_FRAMECHANGED <span class="token operator">=</span> <span class="token number">0x0020</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> SWP_SHOWWINDOW <span class="token operator">=</span> <span class="token number">0x0040</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">int</span></span> LWA_ALPHA <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">IntPtr</span> HWND_TOPMOST <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">IntPtr</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">IntPtr</span> _hwnd<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> !UNITY_EDITOR</span>
    <span class="token class-name">MARGINS</span> margins <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MARGINS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> cxLeftWidth <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    _hwnd <span class="token operator">=</span> <span class="token function">GetActiveWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">int</span></span> fWidth <span class="token operator">=</span> Screen<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">int</span></span> fHeight <span class="token operator">=</span> Screen<span class="token punctuation">.</span>height<span class="token punctuation">;</span>

        <span class="token function">SetWindowLong</span><span class="token punctuation">(</span>_hwnd<span class="token punctuation">,</span> GWL_STYLE<span class="token punctuation">,</span> WS_POPUP <span class="token operator">|</span> WS_VISIBLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">SetWindowLong</span><span class="token punctuation">(</span>_hwnd<span class="token punctuation">,</span> GWL_EXSTYLE<span class="token punctuation">,</span> WS_EX_TOPMOST <span class="token operator">|</span> WS_EX_LAYERED <span class="token operator">|</span> WS_EX_TRANSPARENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">DwmExtendFrameIntoClientArea</span><span class="token punctuation">(</span>_hwnd<span class="token punctuation">,</span> <span class="token keyword">ref</span> margins<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">SetWindowPos</span><span class="token punctuation">(</span>_hwnd<span class="token punctuation">,</span> HWND_TOPMOST<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> fWidth<span class="token punctuation">,</span> fHeight<span class="token punctuation">,</span> SWP_FRAMECHANGED <span class="token operator">|</span> SWP_SHOWWINDOW<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token function">ShowWindowAsync</span><span class="token punctuation">(</span>_hwnd<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Forces window to show in case of unresponsive app    // SW_SHOWMAXIMIZED(3)</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnRenderImage</span><span class="token punctuation">(</span><span class="token class-name">RenderTexture</span> from<span class="token punctuation">,</span> <span class="token class-name">RenderTexture</span> to<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Graphics<span class="token punctuation">.</span><span class="token function">Blit</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">,</span> m_Material<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p>\u521B\u5EFA\u4E00\u4E2Ashader</p><div class="language-csharp ext-csharp code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-csharp line-numbers-mode"><code class="language-csharp">Shader <span class="token string">&quot;Custom/MakeTransparent&quot;</span> <span class="token punctuation">{</span>
  Properties <span class="token punctuation">{</span>
    _MainTex <span class="token punctuation">(</span><span class="token string">&quot;Base (RGB)&quot;</span><span class="token punctuation">,</span> <span class="token number">2D</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;white&quot;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    _TransparentColorKey <span class="token punctuation">(</span><span class="token string">&quot;Transparent Color Key&quot;</span><span class="token punctuation">,</span> Color<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token return-type class-name"><span class="token punctuation">(</span>0<span class="token punctuation">,</span>1<span class="token punctuation">,</span>0<span class="token punctuation">,</span>1<span class="token punctuation">)</span></span>
    _TransparencyMargin <span class="token punctuation">(</span><span class="token string">&quot;Transparency Margin&quot;</span><span class="token punctuation">,</span> Float<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0.01</span> 
  <span class="token punctuation">}</span>
  SubShader <span class="token punctuation">{</span>
    Pass <span class="token punctuation">{</span>
      Tags <span class="token punctuation">{</span> <span class="token string">&quot;RenderType&quot;</span><span class="token operator">=</span><span class="token string">&quot;Opaque&quot;</span> <span class="token punctuation">}</span>
      LOD <span class="token number">200</span>
    
      CGPROGRAM

      <span class="token preprocessor property">#<span class="token directive keyword">pragma</span> vertex VertexShaderFunction</span>
      <span class="token preprocessor property">#<span class="token directive keyword">pragma</span> fragment PixelShaderFunction</span>
    
      <span class="token preprocessor property">#include </span><span class="token string">&quot;UnityCG.cginc&quot;</span>

      <span class="token keyword">struct</span> <span class="token class-name">VertexData</span>
      <span class="token punctuation">{</span>
        <span class="token class-name">float4</span> position <span class="token punctuation">:</span> POSITION<span class="token punctuation">;</span>
        <span class="token class-name">float2</span> uv <span class="token punctuation">:</span> TEXCOORD0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">struct</span> <span class="token class-name">VertexToPixelData</span>
      <span class="token punctuation">{</span>
        <span class="token class-name">float4</span> position <span class="token punctuation">:</span> SV_POSITION<span class="token punctuation">;</span>
        <span class="token class-name">float2</span> uv <span class="token punctuation">:</span> TEXCOORD0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token return-type class-name">VertexToPixelData</span> <span class="token function">VertexShaderFunction</span><span class="token punctuation">(</span><span class="token class-name">VertexData</span> input<span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
        <span class="token class-name">VertexToPixelData</span> output<span class="token punctuation">;</span>
        output<span class="token punctuation">.</span>position <span class="token operator">=</span> UnityObjectToClipPos <span class="token punctuation">(</span>input<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        output<span class="token punctuation">.</span>uv <span class="token operator">=</span> input<span class="token punctuation">.</span>uv<span class="token punctuation">;</span>
        <span class="token keyword">return</span> output<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    
      <span class="token class-name">sampler2D</span> _MainTex<span class="token punctuation">;</span>
      <span class="token class-name">float3</span> _TransparentColorKey<span class="token punctuation">;</span>
      <span class="token class-name"><span class="token keyword">float</span></span> _TransparencyMargin<span class="token punctuation">;</span>

      <span class="token return-type class-name">float4</span> <span class="token function">PixelShaderFunction</span><span class="token punctuation">(</span><span class="token class-name">VertexToPixelData</span> input<span class="token punctuation">)</span> <span class="token punctuation">:</span> SV_Target
      <span class="token punctuation">{</span>
        <span class="token class-name">float4</span> color <span class="token operator">=</span> <span class="token function">tex2D</span><span class="token punctuation">(</span>_MainTex<span class="token punctuation">,</span> input<span class="token punctuation">.</span>uv<span class="token punctuation">)</span><span class="token punctuation">;</span>
      
        <span class="token class-name"><span class="token keyword">float</span></span> deltaR <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>r <span class="token operator">-</span> _TransparentColorKey<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">float</span></span> deltaG <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>g <span class="token operator">-</span> _TransparentColorKey<span class="token punctuation">.</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">float</span></span> deltaB <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span>b <span class="token operator">-</span> _TransparentColorKey<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>deltaR <span class="token operator">&lt;</span> _TransparencyMargin <span class="token operator">&amp;&amp;</span> deltaG <span class="token operator">&lt;</span> _TransparencyMargin <span class="token operator">&amp;&amp;</span> deltaB <span class="token operator">&lt;</span> _TransparencyMargin<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">float4</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> color<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      ENDCG
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>\u65B0\u5EFAMaterial(\u6750\u8D28\u7403),\u9009\u62E9shader\uFF1A c#\u811A\u672C\u6302\u5728\u6444\u50CF\u673A\u4E0A\uFF0C\u6444\u50CF\u673A\u7684Clear Flags\u9009\u62E9Solid Color\u6A21\u5F0F\uFF0C\u811A\u672C\u4E0A\u6302\u8F7D\u521A\u521A\u65B0\u5EFA\u7684\u6750\u8D28\u7403 <img src="`+l+'" alt=""><img src="'+u+'" alt=""></p>',19),k=[r],g={tag:["unity"],cover:"/2022-06-29-15-32-21.png",tinyCover:"/cover/2022-06-29-15-32-21.jpg",coverWidth:474,coverHeight:948,coverPrimary:"cead9a",coverSecondary:"315265",meta:[]},i={__name:"index",setup(b,{expose:s}){return a({meta:[]}),s({frontmatter:{tag:["unity"],cover:"/2022-06-29-15-32-21.png",tinyCover:"/cover/2022-06-29-15-32-21.jpg",coverWidth:474,coverHeight:948,coverPrimary:"cead9a",coverSecondary:"315265",meta:[]}}),(d,y)=>(p(),t("div",null,k))}};typeof n=="function"&&n(i);export{i as default,g as frontmatter};
