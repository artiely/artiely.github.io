import{i as a,o as p,c as e,j as n,k as t}from"./app.f3af3448.js";const o=t(`<h1 id="electron-%E5%BA%94%E7%94%A8%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E4%B9%8Bnedb%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1"><span class="prefix"></span><span class="content">Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93</span><span class="suffix"></span></h1><h2 id="electron-%E5%BA%94%E7%94%A8%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%9A" tabindex="-1"><span class="prefix"></span><span class="content">Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u7684\u51E0\u79CD\u65B9\u6CD5\uFF1A</span><span class="suffix"></span></h2><p>1\u3001\u8FDC\u7A0Bapi\u63A5\u53E3 \uFF08\u591A\u4E2A\u5BA2\u6237\u7AEF\u516C\u7528\u4E00\u5957\u6570\u636E\uFF09</p><p>2\u3001\u8FDE\u63A5\u8FDC\u7A0B\u6570\u636E\u5E93 (\u5C40\u57DF\u7F51\u5185\u4F7F\u7528 \u591A\u4E2A\u5BA2\u6237\u7AEF\u516C\u7528\u4E00\u5957\u6570\u636E ) \uFF08\u4E0D\u5EFA\u8BAE\u4F7F\u7528\uFF09</p><p>3\u3001\u8FDE\u63A5\u672C\u5730\u6570\u636E\u5E93 \uFF08nedb sqlite\uFF09 \u5E94\u7528\u672C\u5730\u4FDD\u5B58\u6570\u636E\uFF08localstore 5M\uFF09 \u7528\u6237\u8BBE\u7F6E\u4FE1\u606F qq\u804A\u5929\u8BB0\u5F55</p><h2 id="%E8%AF%BB%E5%86%99%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6" tabindex="-1"><span class="prefix"></span><span class="content">\u8BFB\u5199\u672C\u5730\u6587\u4EF6</span><span class="suffix"></span></h2><p>\u4F7F\u7528 electron \u7684\u4E00\u5927\u597D\u5904\u662F\u53EF\u4EE5\u8BBF\u95EE\u7528\u6237\u7684\u6587\u4EF6\u7CFB\u7EDF\u3002\u8FD9\u4F7F\u4F60\u53EF\u4EE5\u8BFB\u53D6\u548C\u5199\u5165\u672C\u5730\u7CFB\u7EDF\u4E0A\u7684\u6587\u4EF6\u3002\u4E3A\u4E86\u907F\u514D Chromium \u7684\u9650\u5236\u4EE5\u53CA\u5BF9\u5E94\u7528\u7A0B\u5E8F\u5185\u90E8\u6587\u4EF6\u7684\u6539\u5199\uFF0C\u8BF7\u786E\u4FDD\u4F7F\u7528 electron \u7684 API\uFF0C\u7279\u522B\u662F app.getPath(name) \u51FD\u6570\u3002\u8FD9\u4E2A\u5E2E\u52A9\u51FD\u6570\u53EF\u4EE5\u4F7F\u4F60\u83B7\u5F97\u6307\u5411\u7CFB\u7EDF\u76EE\u5F55\u7684\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5982\u7528\u6237\u7684\u684C\u9762\u3001\u7CFB\u7EDF\u4E34\u65F6\u6587\u4EF6 \u7B49\u7B49\u3002</p><h2 id="nedb-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E6%A1%A3%EF%BC%9A" tabindex="-1"><span class="prefix"></span><span class="content">Nedb \u6570\u636E\u5E93\u6587\u6863\uFF1A</span><span class="suffix"></span></h2><pre><code class="">https://github.com/louischatriot/nedb
</code></pre><p>nedb\u6570\u636E\u5E93\u548Cmongodb\u6570\u636E\u5E93\u7684\u64CD\u4F5C\u65B9\u6CD5\u51E0\u4E4E\u4E00\u6A21\u4E00\u6837\u3002</p><h2 id="%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B" tabindex="-1"><span class="prefix"></span><span class="content">\u4F7F\u7528\u6848\u4F8B</span><span class="suffix"></span></h2><p>\u5047\u8BBE\u6211\u4EEC\u60F3\u4E3A\u6211\u4EEC\u7684\u5E94\u7528\u7A0B\u5E8F\u63D0\u4F9B\u672C\u5730\u7684\u6570\u636E\u5E93\u5B58\u50A8\u3002\u5728\u8FD9\u4E2A\u4F8B\u5B50\u4E2D\uFF0C\u6211\u4EEC\u5C06\u7528 nedb \u4F5C\u4E3A\u6F14\u793A\u3002</p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js">yarn add nedb # \u6216 npm install nedb <span class="token operator">--</span>save
src<span class="token operator">/</span>renderer<span class="token operator">/</span>datastore<span class="token punctuation">.</span>js
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u8FD9\u91CC\uFF0C\u6211\u4EEC\u8BBE\u7F6E NeDB \u5E76\u5C06\u5176\u6307\u5411\u6211\u4EEC\u7684 userData \u76EE\u5F55\u3002\u8FD9\u4E2A\u7A7A\u95F4\u4E13\u95E8\u4E3A\u6211\u4EEC\u7684\u5E94\u7528\u7A0B\u5E8F\u6240\u4FDD\u7559\uFF0C\u6240\u4EE5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u786E\u4FE1\uFF0C\u5176\u4ED6\u7A0B\u5E8F \u6216 \u4E0E\u5176\u4ED6\u7528\u6237\u7684\u4EA4\u4E92\u4E0D\u5E94\u8BE5\u7BE1\u6539\u8FD9\u4E2A\u6587\u4EF6\u7A7A\u95F4\u3002\u81F3\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728 renderer \u8FDB\u7A0B\u4E2D\u5BFC\u5165 datastore.js \u5E76\u4F7F\u7528\u5B83\u3002</p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>
<span class="token keyword">import</span> Datastore <span class="token keyword">from</span> <span class="token string">&#39;nedb&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> remote <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;electron&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Datastore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">autoload</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">filename</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>remote<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">&#39;userData&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;/data.db&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code class="">src/renderer/main.js</code></p><h2 id="%E5%9C%A8vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8" tabindex="-1"><span class="prefix"></span><span class="content">\u5728vue\u9879\u76EE\u4E2D\u4F7F\u7528</span><span class="suffix"></span></h2><p>\u4E3A\u4E86\u66F4\u8FDB\u4E00\u6B65\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u6570\u636E\u5B58\u50A8\u5BFC\u5165\u5230 src/renderer/main.js \u91CC\uFF0C\u5E76\u5C06\u5176\u9644\u52A0\u5230 Vue \u7684 \u539F\u578B (prototype) \u4E0A\u3002\u901A\u8FC7\u5728\u6240\u6709\u7EC4\u4EF6\u6587\u4EF6\u4E2D\u4F7F\u7528 this.$db\uFF0C\u6211\u4EEC\u73B0\u5728\u53EF\u4EE5\u8BBF\u95EE\u6570\u636E\u5B58\u50A8\u7684 API\u3002</p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token keyword">import</span> db <span class="token keyword">from</span> <span class="token string">&#39;./datastore&#39;</span>

<span class="token comment">/* \u5176\u5B83\u4EE3\u7801 */</span>

<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$db <span class="token operator">=</span> db
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="%E5%9C%A8vue%E7%9A%84%E7%BB%84%E4%BB%B6%E9%87%8C%E9%9D%A2%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%8A%A0-%E4%BF%AE%E6%94%B9-%E5%88%A0%E9%99%A4-%E6%98%BE%E7%A4%BA" tabindex="-1"><span class="prefix"></span><span class="content">\u5728vue\u7684\u7EC4\u4EF6\u91CC\u9762\u5B9E\u73B0\u6570\u636E\u7684\u589E\u52A0 \u4FEE\u6539 \u5220\u9664 \u663E\u793A</span><span class="suffix"></span></h2><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$db<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u83B7\u53D6\u67E5\u8BE2\u7684\u6570\u636E</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$db<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \u6761\u4EF6 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span> \u66F4\u6539\u7684\u6570\u636E <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$db<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \u6761\u4EF6 <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div>`,21),c=[o],b={title:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93",tag:["electron","nodejs","nedb"],author:"Artiely",date:"2018-7-11",cover:"/2022-05-14-21-52-03.png",base64:"ffb00e",tinyCover:"/cover/2022-05-14-21-52-03.png",coverWidth:720,coverHeight:1280,coverPrimary:"b5bfc0",coverSecondary:"4a403f",meta:[{property:"og:title",content:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93"}]},l={__name:"2018-7-11-electron-nedb",setup(r,{expose:s}){return a({title:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93",meta:[{property:"og:title",content:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93"}]}),s({frontmatter:{title:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93",tag:["electron","nodejs","nedb"],author:"Artiely",date:"2018-7-11",cover:"/2022-05-14-21-52-03.png",base64:"ffb00e",tinyCover:"/cover/2022-05-14-21-52-03.png",coverWidth:720,coverHeight:1280,coverPrimary:"b5bfc0",coverSecondary:"4a403f",meta:[{property:"og:title",content:"Electron \u5E94\u7528\u64CD\u4F5C\u6570\u636E\u4E4Bnedb\u6570\u636E\u5E93"}]}}),(u,d)=>(p(),e("div",null,c))}};typeof n=="function"&&n(l);export{l as default,b as frontmatter};
