import{i as a,o as p,c as e,j as n,k as t}from"./app.f3af3448.js";const o=t(`<h1 id="electron-%E4%B8%BB%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1" tabindex="-1"><span class="prefix"></span><span class="content">Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1</span><span class="suffix"></span></h1><figure><img src="https://gitee.com/artiely/Figure-bed/raw/master/images/20200315170838.png" alt=""></figure><p>\u6709\u65F6\u5019\u6211\u4EEC\u60F3\u5728\u6E32\u67D3\u8FDB\u7A0B\u4E2D\u901A\u8FC7\u4E00\u4E2A\u4E8B\u4EF6\u53BB\u6267\u884C\u4E3B\u8FDB\u7A0B\u91CC\u9762\u7684\u65B9\u6CD5\u3002\u6216\u8005\u5728\u6E32\u67D3\u8FDB\u7A0B\u4E2D\u901A\u77E5 \u4E3B\u8FDB\u7A0B\u5904\u7406\u4E8B\u4EF6\uFF0C\u4E3B\u8FDB\u7A0B\u5904\u7406\u5B8C\u6210\u540E\u5E7F\u64AD\u4E00\u4E2A\u4E8B\u4EF6\u8BA9\u6E32\u67D3\u8FDB\u7A0B\u53BB\u5904\u7406\u4E00\u4E9B\u4E8B\u60C5\u3002\u8FD9\u4E2A\u65F6\u5019\u5C31 \u7528\u5230\u4E86\u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u4E4B\u95F4\u7684\u76F8\u4E92\u901A\u4FE1\u3002</p><blockquote><p>Electron \u4E3B\u8FDB\u7A0B\uFF0C\u548C\u6E32\u67D3\u8FDB\u7A0B\u7684\u901A\u4FE1\u4E3B\u8981\u7528\u5230\u4E24\u4E2A\u6A21\u5757\uFF1A<strong>ipcMain \u548C ipcRenderer</strong></p></blockquote><blockquote><p><strong>ipcMain</strong>\uFF1A\u5F53\u5728\u4E3B\u8FDB\u7A0B\u4E2D\u4F7F\u7528\u65F6\uFF0C\u5B83\u5904\u7406\u4ECE\u6E32\u67D3\u5668\u8FDB\u7A0B\uFF08\u7F51\u9875\uFF09\u53D1\u9001\u51FA\u6765\u7684\u5F02\u6B65\u548C\u540C\u6B65\u4FE1\u606F, \u5F53\u7136\u4E5F\u6709\u53EF\u80FD\u4ECE\u4E3B\u8FDB\u7A0B\u5411\u6E32\u67D3\u8FDB\u7A0B\u53D1\u9001\u6D88\u606F\u3002</p></blockquote><blockquote><p><strong>ipcRenderer</strong>\uFF1A \u4F7F\u7528\u5B83\u63D0\u4F9B\u7684\u4E00\u4E9B\u65B9\u6CD5\u4ECE\u6E32\u67D3\u8FDB\u7A0B (web \u9875\u9762) \u53D1\u9001\u540C\u6B65\u6216\u5F02\u6B65\u7684\u6D88\u606F\u5230\u4E3B \u8FDB\u7A0B\u3002 \u4E5F\u53EF\u4EE5\u63A5\u6536\u4E3B\u8FDB\u7A0B\u56DE\u590D\u7684\u6D88\u606F\u3002</p></blockquote><p><strong>\u573A\u666F 1\uFF1A\u6E32\u67D3\u8FDB\u7A0B\u7ED9\u4E3B\u8FDB\u7A0B\u53D1\u9001\u5F02\u6B65\u6D88\u606F\uFF1A</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token comment">// \u6E32\u67D3\u8FDB\u7A0B</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u5F20\u4E09&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// \u5F02\u6B65</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token comment">//\u4E3B\u8FDB\u7A0B </span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
ipcMain<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span>msg<span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token comment">// \u5904\u7406\u4E1A\u52A1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>\u573A\u666F 2\uFF1A\u6E32\u67D3\u8FDB\u7A0B\u7ED9\u4E3B\u8FDB\u7A0B\u53D1\u9001\u5F02\u6B65\u6D88\u606F\uFF0C\u4E3B\u8FDB\u7A0B\u63A5\u6536\u5230\u5F02\u6B65\u6D88\u606F\u4EE5\u540E\u901A\u77E5\u6E32\u67D3\u8FDB\u7A0B\uFF1A</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token comment">// \u6E32\u67D3\u8FDB\u7A0B</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;\u5F20\u4E09&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// \u5F02\u6B65</span>
<span class="token comment">// \u4E3B\u8FDB\u7A0B</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
ipcMain<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;reply&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pong&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// \u6E32\u67D3\u8FDB\u7A0B</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
ipcRenderer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;reply&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
  <span class="token comment">// prints &quot;pong&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>\u573A\u666F 3\uFF1A\u6E32\u67D3\u8FDB\u7A0B\u7ED9\u4E3B\u8FDB\u7A0B\u53D1\u9001\u540C\u6B65\u6D88\u606F\uFF1A</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token comment">// \u6E32\u67D3\u8FDB\u7A0B</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> ipcRenderer<span class="token punctuation">.</span><span class="token function">sendSync</span><span class="token punctuation">(</span><span class="token string">&#39;msg-a&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token comment">// \u4E3B\u8FDB\u7A0B</span>
ipcMain<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;msg-a&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="electron%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%E9%80%9A%E8%BF%87-localstorage%E7%BB%99%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%E4%BC%A0%E5%80%BC" tabindex="-1"><span class="prefix"></span><span class="content">Electron\u6E32\u67D3\u8FDB\u7A0B\u901A\u8FC7 localstorage\u7ED9\u53E6\u4E00\u4E2A\u6E32\u67D3\u8FDB\u7A0B\u4F20\u503C</span><span class="suffix"></span></h2><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js">localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="%E9%80%9A%E8%BF%87-browserwindow-%E5%92%8C-webcontents-%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%E5%92%8C%E6%B8%B2%E6%9F%93%E8%BF%9B%E7%A8%8B%E7%9A%84%E9%80%9A%E4%BF%A1%E3%80%82" tabindex="-1"><span class="prefix"></span><span class="content">\u901A\u8FC7 BrowserWindow \u548C webContents \u6A21\u5757\u5B9E\u73B0\u6E32\u67D3\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u7684\u901A\u4FE1\u3002</span><span class="suffix"></span></h2><p>webContents \u662F\u4E00\u4E2A \u4E8B\u4EF6\u53D1\u51FA\u8005.\u5B83\u8D1F\u8D23\u6E32\u67D3\u5E76\u63A7\u5236\u7F51\u9875\uFF0C\u4E5F\u662F BrowserWindow \u5BF9\u8C61\u7684\u5C5E\u6027\u3002</p><p><strong>\u9700\u8981\u4E86\u89E3\u7684\u51E0\u4E2A\u77E5\u8BC6\u70B9\uFF1A</strong></p><p><strong>1\u3001\u83B7\u53D6\u5F53\u524D\u7A97\u53E3\u7684 id\uFF1A</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token keyword">const</span> winId <span class="token operator">=</span> BrowserWindow<span class="token punctuation">.</span><span class="token function">getFocusedWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2\u3001\u76D1\u542C\u5F53\u524D\u7A97\u53E3\u52A0\u8F7D\u5B8C\u6210\u7684\u4E8B\u4EF6</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js">win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;did-finish-load&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3\u3001\u540C\u4E00\u7A97\u53E3\u4E4B\u95F4\u5E7F\u64AD\u6570\u636E</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js">win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;did-finish-load&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  win<span class="token punctuation">.</span>webContents<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;msg&#39;</span><span class="token punctuation">,</span> winId<span class="token punctuation">,</span> <span class="token string">&#39;\u6211\u662F index.html \u7684\u6570\u636E&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>4\u3001\u901A\u8FC7 id \u67E5\u627E\u7A97\u53E3</strong></p><div class="language-js ext-js code-wrapper"><div class="cbt-traffic_light"><span></span><span></span><span></span></div><span class="copy"></span><div class="code-inner"><pre class="language-js line-numbers-mode"><code class="language-js"><span class="token keyword">const</span> win <span class="token operator">=</span> BrowserWindow<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span>winId<span class="token punctuation">)</span>
</code></pre></div><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div>`,26),c=[o],g={title:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1",tag:["electron","nodejs"],author:"Artiely",date:"2018-7-7",cover:"/2022-05-14-21-49-30.png",base64:"50737e",tinyCover:"/cover/2022-05-14-21-49-30.png",coverWidth:736,coverHeight:1592,coverPrimary:"a5bcce",coverSecondary:"5a4331",meta:[{property:"og:title",content:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1"}]},l={__name:"2018-7-7-electron-main-render",setup(r,{expose:s}){return a({title:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1",meta:[{property:"og:title",content:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1"}]}),s({frontmatter:{title:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1",tag:["electron","nodejs"],author:"Artiely",date:"2018-7-7",cover:"/2022-05-14-21-49-30.png",base64:"50737e",tinyCover:"/cover/2022-05-14-21-49-30.png",coverWidth:736,coverHeight:1592,coverPrimary:"a5bcce",coverSecondary:"5a4331",meta:[{property:"og:title",content:"Electron \u4E3B\u8FDB\u7A0B\u548C\u6E32\u67D3\u8FDB\u7A0B\u901A\u4FE1"}]}}),(u,k)=>(p(),e("div",null,c))}};typeof n=="function"&&n(l);export{l as default,g as frontmatter};
