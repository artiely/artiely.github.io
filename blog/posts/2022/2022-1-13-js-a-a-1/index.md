---
tag:
  - js
cover: /2022-05-11-09-12-40.png
tinyCover: /cover/2022-05-11-09-12-40.png
coverWidth: 564
coverHeight: 794

---

# åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ a === a - 1 ï¼Ÿ

_**æ€è€ƒ10ç§’é’Ÿå†å¾€ä¸‹çœ‹â€”â€”**_

## ç¬¬ä¸€ä¸ªç­”æ¡ˆè‡ªç„¶æ˜¯Infinityï¼Œæˆ–è€…è¯´ï¼Œæ‰©å±•ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯æ­£è´ŸInfinity

> **ğŸ‘‰ğŸ» çŸ¥è¯†ç‚¹:** åœ¨JavaScripté‡Œï¼ŒInfinityæ˜¯ä¸€ä¸ªNumberç±»å‹çš„å­—é¢é‡ï¼Œè¡¨ç¤ºæ— ç©·å¤§ã€‚å½“ä¸€ä¸ªNumberç±»å‹çš„å€¼ï¼Œåœ¨è¿ç®—è¿‡ç¨‹ä¸­è¶…è¿‡äº†æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼Œå°±ä¼šå¾—åˆ°æ— ç©·å¤§ã€‚

æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªä¸ä¸º0çš„æ­£æ•°é™¤ä»¥0ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯æ— ç©·å¤§ã€‚

`console.log(100 / 0); // Infinity`

å¯¹åº”çš„ï¼Œè´Ÿæ•°æœ‰è´Ÿæ— ç©·å¤§ã€‚

`console.log(-100 / 0); // \-Infinity`

å¦‚æœæˆ‘ä»¬æ•°å€¼è¿ç®—çš„å€¼ï¼Œè¶…è¿‡äº†Numberå…è®¸è¡¨ç¤ºçš„èŒƒå›´ï¼Œä¹Ÿæ˜¯ä¼šå¾—åˆ°Infinityã€‚

`console.log(1e1000); // Infinity`

> åœ¨JavaScripté‡Œï¼Œ**Number.POSITIVE\_INFINITY**å’Œ**Number.NEGATIVE\_INFINITY**ä¸¤ä¸ªå¸¸é‡çš„å€¼ï¼Œå¯¹åº”æ­£è´ŸInfinityã€‚
>
> **Number.isFinite\(\)** å¯ä»¥åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯æœ‰ç©·çš„ï¼ŒNumber.isFinite\(n\)ï¼Œå½“næ˜¯Numberç±»å‹æ—¶ï¼Œåªæœ‰å®ƒæ˜¯æ­£è´ŸInfinityæˆ–NaNæ—¶ï¼Œè¿”å›falseï¼Œå…¶ä»–æƒ…å†µä¸‹è¿”å›trueã€‚
>
> ä»»ä½•ä¸€ä¸ªæœ‰ç©·çš„æ•°å’ŒInfinityçš„åŠ å‡è¿ç®—çš„ç»“æœéƒ½æ˜¯Infinityï¼Œè€Œ**Infinity === Infinity**ï¼Œæ‰€ä»¥ï¼š

```js
const a = Infinity
console.log(a === a - 1) // true
const b = -Infinity
console.log(b === b - 1) // true
```

**è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸¤ä¸ªç­”æ¡ˆã€‚**

> ### **ğŸ’¡ ä½†æ˜¯ï¼Œè¦æ³¨æ„ï¼ŒInfinityè¿ç®—çš„ç»“æœå¹¶ä¸æ€»æ˜¯Infinityï¼Œæ¯”å¦‚æˆ‘ä»¬çœ‹ä¸‹é¢å‡ ç§è¿ç®—ï¼š**

```js
console.log(Infinity + Infinity) // Infinity
console.log(Infinity - Infinity) // NaN
console.log(Infinity * Infinity) // Infinity
console.log(Infinity / Infinity) // NaN
console.log(Infinity * 0) // NaN
```

**ç»“è®ºæ˜¯**ï¼Œ_Infinityè¿ç®—ä¹Ÿæœ‰å¯èƒ½å¾—åˆ°NaNï¼Œæ‰€ä»¥éœ€è¦å°å¿ƒï¼Œä¾‹å¦‚æˆ‘ä»¬çš„ä¸€ä¸ªè®¡ç®—è¡¨è¾¾å¼ä¸­ï¼Œæœ‰ä¸¤ä¸ªå€¼ç›¸ä¹˜ï¼Œä¸€ä¸ªå€¼æœ‰å¯èƒ½å¾ˆå¤§ï¼Œå¦ä¸€ä¸ªå€¼æœ‰å¯èƒ½ä¸º0æ—¶ï¼Œå°±éœ€è¦å°å¿ƒï¼Œå¦‚æœé‚£ä¸ªå¾ˆå¤§çš„å€¼å¾—åˆ°Infinityï¼Œå¦ä¸€ä¸ªå€¼æ°å¥½ä¸º0æ—¶ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼å¯èƒ½æ˜¯NaNï¼Œè¿™ä¼šé€ æˆä¸€äº›bugã€‚_

```js
const result = a + b * c + d
// å¦‚æœ b æ˜¯ Infinity è€Œ c æ˜¯ 0ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœå°±æœ‰å¯èƒ½æ˜¯ NaN
```

> å¥½äº†ï¼Œä»¥ä¸Šæ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç­”æ¡ˆï¼š**æ­£è´ŸInfinityã€‚**

## æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹å¦ä¸€ä¸ªï¼ˆå¦ä¸€äº›ï¼‰ç­”æ¡ˆ

æˆ‘ä»¬ç»™aä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ•°å€¼ï¼Œæ¯”å¦‚1e45ï¼š

```js
const a = 1e45
console.log(a) // 1e+45
console.log(a === a - 1) // true
```

æœ‰äº›åŒå­¦ä¸€çœ‹ï¼Œè¯¶ï¼Œè¿™ä¹Ÿè¡Œï¼Ÿ

è¿™ä¸ªä¸ä½†å¯ä»¥ï¼Œä½ éšä¾¿æ‰¾ä¸¤ä¸ªæ¯”è¾ƒå¤§çš„æ•°ï¼Œåº”è¯¥éƒ½æ˜¯å¯ä»¥çš„ï¼š

```js
const a = 6.22e23
console.log(a === a - 1) // true
```

#### é‚£è¿™åˆæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ

> **ğŸ‘‰ğŸ» çŸ¥è¯†ç‚¹ï¼š** åœ¨JavaScripté‡Œï¼Œæ•´æ•°å¯ä»¥è¢«ç²¾ç¡®è¡¨ç¤ºçš„èŒƒå›´æ˜¯ä» **\-2 \*\* 53 + 1** åˆ° **2 \*\* 53 \- 1**ï¼Œå³ **\-9007199254740991** åˆ° **9007199254740991**ã€‚è¶…è¿‡è¿™ä¸ªæ•°å€¼çš„æ•´æ•°ï¼Œéƒ½ä¸èƒ½è¢«ç²¾ç¡®è¡¨ç¤ºã€‚
>
> å¸¸é‡**Number.MAX\_SAFE\_INTEGER**å’Œ**Number.MIN\_SAFE\_INTEGER**åˆ†åˆ«å¯¹åº”**9007199254740991**å’Œ **\-9007199254740991**ã€‚

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

```js
const a = 9007199254740986
for (let i = 0; i < 10; i++)
  console.log(`${i} : ${a + i}`)
```

åœ¨**chromeä¸‹çš„è¾“å‡ºç»“æœ**æ˜¯è¿™æ ·çš„ï¼š

```shell
0 : 9007199254740986
1 : 9007199254740987
2 : 9007199254740988
3 : 9007199254740989
4 : 9007199254740990
5 : 9007199254740991
6 : 9007199254740992
7 : 9007199254740992
8 : 9007199254740994
9 : 9007199254740996
```

çœ‹åˆ°åœ¨ a + i çš„å€¼å°äºç­‰äº 9007199254740991 æ—¶ï¼Œè¾“å‡ºæ­£å¸¸çš„æ¯æ¬¡å¾ªç¯åŠ 1çš„ç»“æœï¼Œåˆ°äº†å¤§äº 9007199254740991 åï¼Œè¾“å‡ºçš„ç»“æœé‡Œå‡ºç°äº†ä¸¤æ¬¡ 9007199254740992ï¼Œå°‘äº† 9007199254740993 å’Œ 9007199254740995ã€‚

**è¿™æ˜¯å› ä¸º**ï¼Œè¶…è¿‡ 9007199254740991 ä¹‹åï¼ŒJavaScriptçš„Numberç±»å‹å°±æ²¡åŠæ³•ç²¾ç¡®åœ°è¡¨ç¤ºæ•´æ•°äº†ã€‚**å› ä¸ºä¸¢å¤±äº†ç²¾åº¦ï¼Œæ‰€ä»¥ 9007199254740993 å’Œ 9007199254740995 ä¸è§äº†ã€‚**

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªçŸ¥è¯†ç‚¹æ„é€ å…¶ä»–ä¸€äº›æ»¡è¶³éœ€æ±‚çš„å€¼ï¼š

```js
const a = Number.MIN_SAFE_INTEGER - 1
console.log(a === a - 1) // true
```

#### **å¤§æ•´æ•° Big Integer**

åœ¨æœ€æ–°çš„Chromeæµè§ˆå™¨ä¸‹ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥ç²¾ç¡®è¡¨ç¤ºå¤§æ•´æ•°ï¼ŒTC39çš„Big Integerææ¡ˆç›®å‰æ˜¯Stage 3é˜¶æ®µï¼Œåœ¨Chromeæµè§ˆå™¨ä¸Šå·²ç»è¢«æ”¯æŒã€‚

```shell
console.log(2 ** 2000); // Infinity
console.log(2n ** 2000n); //114813069527425452423283320117768198402231770208869520047764273682576626139237031385665948631650626991844596463898746277344711896086305533142593135616665318539129989145312280000688779148240044871428926990063486244781615463646388363947317026040466353970904996558162398808944629605623311649536164221970332681344168908984458505602379484807914058900934776500429002716706625830522008132236281291761267883317206598995396418127021779858404042159853183251540889433902091920554957783589672039160081957216630582755380425583726015528348786419432054508915275783882625175435528800822842770817965453762184851149029376n
```

#### **NaN**

æœ‰åŒå­¦å¯èƒ½æƒ³åˆ°NaNï¼Œä¸è¿‡NaNä¸ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬NaNè‡ªèº«ï¼Œæ‰€ä»¥ï¼Œåˆ©ç”¨NaNæ˜¯ä¸å¯ä»¥çš„ï¼š

```js
const a = NaN
console.log(a === a - 1) // false
```

> æœ€åï¼Œæˆ‘ä»¬å†æ‰©å±•ä¸€ä¸‹ï¼Œå¦‚æœé¢è¯•é¢˜è¦æ±‚çš„**ä¸æ˜¯a === a \- 1ï¼Œè€Œæ˜¯a == a \- 1**ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å…¶ä»–ç­”æ¡ˆå‘¢ï¼Ÿ
>
> **å¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ã€‚**

ç¬¬ä¸€ç§ï¼Œ`Object`è½¬æ¢ä¸º`Number`ï¼Œä¼šè°ƒç”¨`Object.valueOf()`å’Œ`Object.toString()`æ¥è·å–æ•°å­—åŸºæœ¬ç±»å‹ã€‚

``` js
var a = {
  i: 1,
  toString() {
    return a.i--
  },
}
console.log(a == a - 1)
```

ç¬¬äºŒç§ï¼Œä½¿ç”¨ä¸€ä¸ª`defineProperty`ï¼Œæ¯æ¬¡è·å–å€¼æ—¶åŠ 1ã€‚ï¼ˆa===1 && a===2 && a===3 æ­£æ˜¯ç”¨çš„è¿™ä¸ªæ–¹æ³•ï¼‰

``` js
let val = 1
Object.defineProperty(window, 'a', {
  get() {
    return val++
  },
})
console.log(a == a - 1)
```
